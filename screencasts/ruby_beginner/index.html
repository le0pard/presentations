<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Ruby, часть 1 - Alexey Vasiliev</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="shower/themes/bright/styles/screen.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Ruby</h1>
		<p>Alexey Vasiliev</p>
	</header>

	<section class="slide cover w h" id="Cover"><div>
		<h2>Ruby, часть 1</h2>
		<p><a href="http://leopard.in.ua">Alexey Vasiliev</a></p>
		<img src="pictures/cover.jpg" alt="Ruby" />
		<!--
			To apply styles to the certain slides
			set slide ID to get needed elements
			-->
		<style>
			#Cover h2 {
				margin: 300px 0 0;
				color: #FFF;
				text-align: center;
				font-size: 70px;
				}
			#Cover p {
				margin: 10px 0 0;
				text-align: center;
				color: #FFF;
				font-style: italic;
				font-size: 20px;
				}
				#Cover p a {
					color: #FFF;
				}
		</style>
	</div></section>



  <section class="slide shout" id="section0"><div>
    <h2>Установка и использование Ruby</h2>
  </div></section>

	<section class="slide" id="section0Beginning"><div>
		<h2>С чего начать?</h2>
    <ul>
      <li><a href="https://www.ruby-lang.org/en/" target="blank">Ruby Official</a></li>
      <li><a href="https://www.ruby-lang.org/en/documentation/installation/" target="blank">Installing Ruby</a>
        <ul>
          <li><a href="https://github.com/postmodern/chruby#readme" target="blank">Chruby</a></li>
          <li><a href="https://github.com/sstephenson/rbenv#readme" target="blank">Rbenv</a></li>
          <li><a href="http://rvm.io/" target="blank">RVM</a></li>
          <li><a href="https://bitbucket.org/jonforums/uru" target="blank">Uru</a></li>
          <li>From source</li>
        </ul>
      </li>
      <li><a href="http://tryruby.org/levels/1/challenges/0" target="blank">Try Ruby</a></li>
    </ul>
    <img src="pictures/ruby-lang.png" class="place r t" alt="Ruby" />
    <style>
			#section0Beginning img {
				width: 300px;
        right: 100px;
        top: 200px;
			}
		</style>
	</div></section>




  <section class="slide shout" id="section1"><div>
    <h2>Введение в объекты и методы</h2>
  </div></section>

	<section class="slide" id="section1AllObjects"><div>
		<h2>Все объекты</h2>
    <pre><code>self</code></pre>
    <pre><code>1.class</code></pre>
    <pre><code>1.5.class</code></pre>
    <pre><code>"Всем привет".class</code></pre>
	</div></section>

	<section class="slide" id="section1WithObjects"><div>
		<h2>Взаимодействие с объектами</h2>
    <pre><code>2.even?</code></pre>
    <pre><code>1.next.next</code></pre>
    <pre><code>1.next.next.even?</code></pre>
	</div></section>

	<section class="slide" id="section1WorkObjects"><div>
		<h2>Работа с методами</h2>
    <pre><code>1.methods</code></pre>
    <pre><code>1.methods.sort</code></pre>
	</div></section>

	<section class="slide" id="section1MethodArgs"><div>
		<h2>Вызов метода с аргументами</h2>
    <pre><code>["один", "два", "три"].index("два")</code></pre>
    <pre><code>3.between? 1, 5
3.between?(1, 5)</code></pre>
	</div></section>

  <section class="slide" id="section1MethodSugar1"><div>
    <h2>Синтаксический сахар для методов</h2>
    <pre><code>1.+(2)
1.+(2).+(3)</code></pre>
    <pre><code>1 + 2
1 + 2 + 3</code></pre>
  </div></section>

  <section class="slide" id="section1MethodSugar2"><div>
    <h2>Синтаксический сахар для методов</h2>
    <h3>Набор методов с особым статусом</h3>
    <pre><code>+   -   *   /   =   ==    !=    >   <   >=    <=    []</code></pre>
    <pre><code>words = ["foo", "bar", "baz"]
words[1]</code></pre>
      <pre><code>words = ["foo", "bar", "baz"]
words.[](1)</code></pre>
  </div></section>




  <section class="slide shout" id="section2"><div>
    <h2>Введение в строки</h2>
  </div></section>

	<section class="slide" id="section2Initialize"><div>
		<h2>Инициализация строк</h2>
    <pre><code>"Привет мир"</code></pre>
    <pre><code>'Привет мир'</code></pre>
    <pre><code>"Привет мир".length</code></pre>
	</div></section>

	<section class="slide" id="section2Iterpolation"><div>
		<h2>Интерполяция строк</h2>
    <pre><code>a = 1
b = 4
"The number #{a} is less than #{b}"</code></pre>
    <pre><code>"The length of string is #{"string".length}"</code></pre>
	</div></section>

	<section class="slide" id="section2Search"><div>
		<h2>Поиск в строке</h2>
    <pre><code>"SmartMe find me".include? "SmartMe"</code></pre>
    <pre><code>"SmartMe find me".start_with? "SmartMe"</code></pre>
    <pre><code>"SmartMe find me".end_with? "me"</code></pre>
	</div></section>

	<section class="slide" id="section2Case"><div>
		<h2>Смена регистра строки</h2>
    <pre><code>"This is Mixed CASE".upcase</code></pre>
    <pre><code>"This is Mixed CASE".downcase</code></pre>
    <pre><code>"ThiS iS A vErY ComPlEx SenTeNcE".swapcase</code></pre>
    <pre><code>"ThiS iS A vErY ComPlEx SenTeNcE".swapcase!</code></pre>
	</div></section>

	<section class="slide" id="section2Concat"><div>
		<h2>Обьединение (конкатенация) и разбитие строк</h2>
    <pre><code>"Smart" + "Me"
"Smart".concat("Me")
"Smart" << "Me"</code></pre>
    <pre><code>"Some long string".split
"Some long string".split "o"
"Some long string".split /[mn]/</code></pre>
	</div></section>

	<section class="slide" id="section2Gsub"><div>
		<h2>Замена подстрок</h2>
    <pre><code>"SmartYou".sub("You", "Me")</code></pre>
    <pre><code>"SmartYou and You".sub("You", "Me")</code></pre>
    <pre><code>"SmartYou and You".gsub("You", "Me")</code></pre>
    <pre><code>"SmartMe for everyone".gsub(/[aio]/, "1")</code></pre>
	</div></section>

	<section class="slide" id="section2search"><div>
		<h2>Поиск подстроки через регулярное выражения</h2>
    <pre><code>"SmartMe find Me".match(/Me/)</code></pre>
    <pre><code>"SmartMe find Me".match(/SmartMe (.*)/)</code></pre>
	</div></section>





  <section class="slide shout" id="section3"><div>
    <h2>Условия и циклы - управляющие структуры в Ruby</h2>
  </div></section>

	<section class="slide" id="section3Initialize"><div>
		<h2>Логические операторы</h2>
    <pre><code>name = "Bob"
name == "Alice"
name == "Bob"

age = 21
age > 18
age <= 35</code></pre>
	</div></section>

	<section class="slide" id="section3Combine"><div>
		<h2>Комбинирование операторов</h2>
    <pre><code>age >= 18 && name == "Bob"
age >= 18 || name == "Alice"</code></pre>
    <pre><code>!(name == "Alice")</code></pre>
    <pre><code>false && 1+2
true && 1+2
true || 1+2
false || 1+2</code></pre>
	</div></section>

	<section class="slide" id="section3IfElse"><div>
		<h2>Ветвления в Ruby</h2>
    <pre><code>number = 10
if number > 0
  "#{number} is positive"
else
  "#{number} is negative"
end </code></pre>
    <pre><code>if, else, elsif, unless</code></pre>
	</div></section>

	<section class="slide" id="section3Tenar"><div>
		<h2>Тенарный оператор в Ruby</h2>
    <pre><code>number > 0 ? "#{number} is positive" : "#{number} is negative"</code></pre>
	</div></section>

	<section class="slide" id="section3Cycles"><div>
		<h2>Циклы в Ruby</h2>
    <p>Array#each, Array#select, Array#map, прочие</p>
    <pre><code>loop do
  puts "Это будет выводится бесконечно"
end
loop do
  puts "Это будет выводится не бесконечно"
  break if Random.rand(100) == 42
end</code></pre>
	</div></section>

	<section class="slide" id="section3Cycles2"><div>
		<h2>Циклы в Ruby</h2>
    <pre><code>5.times do
  puts "Я выведусь 5 раз"
end
10.times do |i|
  puts "Итерация #{i + 1}"
end</code></pre>
	</div></section>




  <section class="slide shout" id="section4"><div>
    <h2>Введение в массивы</h2>
  </div></section>

	<section class="slide" id="section4Initialize"><div>
		<h2>Инициализация массива</h2>
    <pre><code>empty_list = []
empty_list = Array.new</code></pre>
    <pre><code>[1, 2, 3]
[1, 'one', 2, 'two']</code></pre>
	</div></section>

	<section class="slide" id="section4GetData"><div>
		<h2>Возврат данных из массива</h2>
    <pre><code>[1, 2, 3, 4, 5][2]</code></pre>
    <pre><code>[1, 2, 3, 4, 5][-5]</code></pre>
	</div></section>

	<section class="slide" id="section4AddData"><div>
		<h2>Добавление данных в массив</h2>
    <pre><code>[1, 2, 3, 4, 5] << 6</code></pre>
    <pre><code>[1, 2, 3, 4, 5].push(6)</code></pre>
	</div></section>

	<section class="slide" id="section4Transform"><div>
		<h2>Изменение данных в массиве</h2>
    <pre><code>[1, 2, 3, 4, 5].map { |i| i + 1 }</code></pre>
    <pre><code>[1,2,3,4,5].map { |i| i * 3 }</code></pre>
    <p>Array#map алиас на метод Array#collect</p>
	</div></section>

	<section class="slide" id="section4Select"><div>
		<h2>Фильтрация элементов в массиве</h2>
    <pre><code>[1,2,3,4,5,6].select {|number| number % 2 == 0}</code></pre>
    <pre><code>names = ['rock', 'paper', 'scissors', 'lizard', 'spock']
names.select {|word| word.length > 5}</code></pre>
	</div></section>

	<section class="slide" id="section4Delete"><div>
		<h2>Удаление элементов в массиве</h2>
    <pre><code>[1,2,3,4,5,6,7].delete_if {|i| i < 4 }</code></pre>
    <pre><code>[1,2,3,4,5,6].delete_if {|number| number % 2 == 0}</code></pre>
	</div></section>

	<section class="slide" id="section4ForLoops"><div>
		<h2>Циклы for</h2>
    <pre><code>array = [1, 2, 3, 4, 5]
for i in array
  puts i
end</code></pre>
	</div></section>

	<section class="slide" id="section4EachLoops"><div>
		<h2>Циклы each</h2>
    <pre><code>array = [1, 2, 3, 4, 5]
array.each do |i|
  puts i
end</code></pre>
	</div></section>




  <section class="slide shout" id="section5"><div>
    <h2>Введение в хэши</h2>
  </div></section>

	<section class="slide" id="section5Initialize"><div>
		<h2>Инициализация хэша</h2>
    <pre><code>ages = {
  "Jack" => 10,
  "Jill" => 12,
  "Bob" => 14
}</code></pre>
	</div></section>

	<section class="slide" id="section5GetData"><div>
		<h2>Возврат данных из хэша</h2>
    <pre><code>ages = {
  "Jack" => 10,
  "Jill" => 12,
  "Bob" => 14
}
ages["Jack"]</code></pre>
	</div></section>

	<section class="slide" id="section5Transform"><div>
		<h2>Изменение данных в хэше</h2>
    <pre><code>ages = {
  "Jack" => 10,
  "Jill" => 12,
  "Bob" => 14
}
ages["Jack"] = 18</code></pre>
	</div></section>

	<section class="slide" id="section5Iterate"><div>
		<h2>Итерирование по элементам хеша</h2>
    <pre><code>restaurant_menu = {
  "Ramen" => 3,
  "Dal Makhani" => 4,
  "Coffee" => 2
}
restaurant_menu.each do | item, price |
  puts "#{item}: $#{price}"
end</code></pre>
	</div></section>

	<section class="slide" id="section5KeysAndValues"><div>
		<h2>Получение ключей и значений хеша</h2>
    <pre><code>restaurant_menu = {
  "Ramen" => 3,
  "Dal Makhani" => 4,
  "Coffee" => 2
}
restaurant_menu.keys
restaurant_menu.values</code></pre>
	</div></section>

	<section class="slide" id="section5DefValue"><div>
		<h2>Значение по умолчанию хеша</h2>
    <pre><code>normal = Hash.new
was_not_there = normal[:zig]
puts "Wasn't there:"
p was_not_there

usually_brown = Hash.new("brown")
pretending_to_be_there = usually_brown[:zig]
puts "Pretending to be there:"
p pretending_to_be_there</code></pre>
	</div></section>

	<section class="slide" id="section5PrefilValue"><div>
		<h2>Инициализация хеша с данными</h2>
    <pre><code>chuck_norris = Hash[:punch, 99, :kick, 98]

a = [:punch, 0]
b = [:kick, 72]
c = [:stops_bullets_with_hands, false]
key_value_pairs = [a, b, c]
Hash[key_value_pairs]</code></pre>
	</div></section>



  <section class="slide shout" id="section7"><div>
    <h2>Ruby методы</h2>
  </div></section>

	<section class="slide" id="section7Methods"><div>
		<h2>Что такое методы в Ruby?</h2>
    <pre><code>puts 1.next</code></pre>
    <pre><code>puts 1.method("next")</code></pre>
    <pre><code>next_method_object = 1.method("next")
puts next_method_object.call</code></pre>
	</div></section>

	<section class="slide" id="section7Methods2"><div>
		<h2>Написание методов</h2>
    <pre><code>def reverse_sign(an_integer)
  return 0 - an_integer
end

puts reverse_sign(100)
puts reverse_sign(-5)</code></pre>
	</div></section>

	<section class="slide" id="section7Methods3"><div>
		<h2>Написание методов</h2>
    <pre><code>def add(a_number, another_number, yet_another_number = 0)
  a_number + another_number + yet_another_number
end

puts add(1, 2)</code></pre>
	</div></section>

	<section class="slide" id="section7Args1"><div>
		<h2>Аргументы массивом</h2>
    <pre><code>def add(*numbers)
  numbers.inject(0) { |sum, number| sum + number }
end

puts add(1)
puts add(1, 2)
puts add(1, 2, 3)</code></pre>
	</div></section>

	<section class="slide" id="section7Args2"><div>
		<h2>Аргументы массивом</h2>
    <pre><code>def add(a_number, another_number, yet_another_number)
  a_number + another_number + yet_another_number
end

numbers_to_add = [1, 2, 3]
puts add(*numbers_to_add)</code></pre>
	</div></section>

	<section class="slide" id="section7Args3"><div>
		<h2>Аргументы массивом</h2>
    <pre><code>def add(*numbers)
  numbers.inject(0) { |sum, number| sum + number }
end

def add_with_message(message, *numbers)
  "#{message} : #{add(*numbers)}"
end

puts add_with_message("The Sum is", 1, 2, 3)</code></pre>
	</div></section>

	<section class="slide" id="section7NameArgs1"><div>
		<h2>Именованные параметры</h2>
    <pre><code>def add(a_number, another_number, options = {})
  sum = a_number + another_number
  sum = sum.abs if options[:absolute]
  sum = sum.round(options[:precision]) if options[:round]
  sum
end
puts add(1.0134, -5.568, absolute: true)
puts add(1.0134, -5.568, absolute: true,
  round: true, precision: 2)</code></pre>
	</div></section>

	<section class="slide" id="section7NameArgs2"><div>
		<h2>Именованные параметры (Ruby 2.0+)</h2>
    <pre><code>def obvious_total(subtotal:, tax:, discount: 10)
  subtotal + tax - discount
end

obvious_total(subtotal: 100, tax: 10, discount: 5)</code></pre>
	</div></section>



  <section class="slide shout" id="section6"><div>
    <h2>Классы</h2>
  </div></section>

	<section class="slide" id="section6Grouping"><div>
		<h2>Групировка обьектов</h2>
    <pre><code>puts 1.class
puts "".class
puts [].class</code></pre>
    <pre><code>puts 1.is_a?(Integer)
puts 1.is_a?(String)</code></pre>
    <pre><code>1.class.class</code></pre>
	</div></section>

	<section class="slide" id="section6Create"><div>
		<h2>Создаем классы</h2>
    <pre><code>class Rectangle
  def initialize(length, breadth)
    @length = length
    @breadth = breadth
  end
  def perimeter
    2 * (@length + @breadth)
  end
end</code></pre>
	</div></section>

	<section class="slide" id="section6Create2"><div>
		<h2>Создаем классы</h2>
    <pre><code>class Rectangle
  def initialize(length, breadth)
    @length, @breadth = length, breadth
  end
  def perimeter
    2 * (@length + @breadth)
  end
  def area
    @length * @breadth
  end
end</code></pre>
	<style>
		#section6Create2 code {
			font-size: 1.2rem;
			}
	</style>
	</div></section>




  <section class="slide shout" id="section8"><div>
    <h2>Lambdas и Blocks</h2>
  </div></section>

	<section class="slide" id="section8Lambda1"><div>
		<h2>Lambdas</h2>
    <pre><code>l = lambda { "Do or do not" }
puts l.call</code></pre>
	</div></section>

	<section class="slide" id="section8Lambda2"><div>
		<h2>Lambdas</h2>
    <pre><code>l = lambda do |string|
  if string == "try"
    return "There's no such thing"
  else
    return "Do or do not."
  end
end
puts l.call("try")</code></pre>
	</div></section>

	<section class="slide" id="section8Blocks1"><div>
		<h2>Blocks</h2>
    <pre><code>def demonstrate_block(number)
  yield(number)
end

puts demonstrate_block(1) { |number| number + 1 }</code></pre>
	</div></section>

	<section class="slide" id="section8Blocks2"><div>
		<h2>Blocks</h2>
    <pre><code>def calculate(a, b)
  yield(a, b)
end

calculate(10,20){ |a,b| a + b }</code></pre>
	</div></section>


  <section class="slide shout" id="section9"><div>
    <h2>Модули</h2>
  </div></section>

	<section class="slide" id="section9Modules1"><div>
		<h2>Модули</h2>
    <pre><code>module WarmUp
  def push_ups
    "Phew, I need a break!"
  end
end

class Gym
  include WarmUp
end

class Dojo
  include WarmUp
end</code></pre>
	<style>
		#section9Modules1 code {
			font-size: 1rem;
			}
	</style>
	</div></section>

	<section class="slide" id="section9Modules2"><div>
		<h2>Иерархия</h2>
    <pre><code>module WarmUp
end

puts WarmUp.class      # Module
puts Class.superclass   # Module
puts Module.superclass</code></pre>
	</div></section>

	<section class="slide" id="section9Modules3"><div>
		<h2>Модули как пространства имен</h2>
    <pre><code>module Perimeter
  class Array
    def initialize
      @size = 400
    end
  end
end
our_array = Perimeter::Array.new
ruby_array = Array.new</code></pre>
	</div></section>

	<section class="slide" id="section9Modules4"><div>
		<h2>:: обьект</h2>
    <pre><code>module One
  A = 5
  module Two
    B = 9
    A = 7

    class Three
      def push
        ::A
      end
    end
  end
end

A = 10</code></pre>
	<style>
		#section9Modules4 code {
			font-size: 0.9rem;
			}
	</style>
	</div></section>



  <section class="slide shout" id="section10"><div>
    <h2>Потоки (streams)</h2>
  </div></section>

	<section class="slide" id="section10Stream1"><div>
		<h2>I/O потоки и IO классы</h2>
    <pre><code># open the file "new-fd" and create a file descriptor:
fd = IO.sysopen("new-fd", "w")
p IO.new(fd)

io_streams = Array.new
ObjectSpace.each_object(IO) { |x| io_streams << x }

p io_streams</code></pre>
	</div></section>

	<section class="slide" id="section10Stream2"><div>
		<h2>STDOUT, STDIN и STDERR</h2>
    <pre><code>p STDOUT.class
p STDOUT.fileno

p STDIN.class
p STDIN.fileno

p STDERR.class
p STDERR.fileno</code></pre>
	</div></section>

	<section class="slide" id="section10Stream3"><div>
		<h2>Kernel $stdout, $stdin и $stderr</h2>
    <pre><code>p $stdin.object_id
p STDIN.object_id

p $stdout.object_id
p STDOUT.object_id

p $stderr.object_id
p STDERR.object_id</code></pre>
	</div></section>

	<section class="slide" id="section10Stream4"><div>
		<h2>StringIO</h2>
    <pre><code>require 'stringio'
capture = StringIO.new
$stderr = capture
$stderr.puts 'test'
capture.string</code></pre>
	</div></section>

	<section class="slide" id="section10File1"><div>
		<h2>Открытие и закрытие файла</h2>
    <pre><code>mode = "r+"
file = File.open("friend-list.txt", mode)
puts file.inspect
puts file.read
file.close</code></pre>
	</div></section>

	<section class="slide" id="section10File2"><div>
		<h2>Открытие и закрытие файла</h2>
    <pre><code>what_am_i = File.open("clean-slate.txt", "w") do |file|
  file.puts "Call me Ishmael."
end

p what_am_i

File.open("clean-slate.txt", "r") {|file| puts file.read }</code></pre>
	</div></section>

	<section class="slide" id="section10File3"><div>
		<h2>Чтение и запись файла</h2>
    <pre><code>file = File.open("friend-list.txt", "r+")
p file.read
file.rewind
buffer = ""
p file.read(23, buffer)
p buffer

file.close</code></pre>
	</div></section>

	<section class="slide" id="section10File4"><div>
		<h2>Чтение и запись файла</h2>
    <pre><code>p File.read("friend-list.txt")

File.open("friend-list.txt") do |f|
  f.seek(20, IO::SEEK_SET)
  p f.read(10)
end</code></pre>
	</div></section>


	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="shower/shower.min.js"></script>
	<!-- Copyright © 2014 Yours Truly, Famous Inc. -->
	<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>