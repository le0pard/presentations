<!DOCTYPE html>
<html lang="en">
<head>
    <title>Anycable on production: tips and tricks</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="shower/themes/material/styles/styles.css" />
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>
<body class="shower list">

    <header class="caption">
      <h1>Anycable on production: tips and tricks</h1>
      <p>Oleksii Vasyliev, Railsware</p>
    </header>

    <section class="slide" id="Cover">
      <h2>Anycable on production: tips and tricks</h2>
      <p>Brought to you by <a href="http://leopard.in.ua/">Alexey Vasiliev</a>, <a
          href="http://railsware.com/">Railsware</a></p>
      <!--
          To apply styles to the certain slides
          set slide ID to get needed elements
          -->
      <style>
        #Cover {
          background-color: #04A05F;
        }

        #Cover h2 {
          margin: 50px 0 0;
          color: #FFF;
          text-align: left;
          font-weight: bold;
          font-size: 66px;
          line-height: 130%;
        }

        #Cover p {
          margin: 50px 0 0;
          text-align: left;
          color: #FFF;
          font-style: italic;
          font-size: 20px;
        }

        #Cover p a {
          color: #FFF;
        }
      </style>
    </section>

    <section class="slide" id="Reason1">
      <div>
        <img src="pictures/reason1.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="Reason2">
      <div>
        <img src="pictures/reason2.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="Architecture">
      <div>
        <img src="pictures/architecture.jpeg" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="Architecture2">
      <div>
        <img src="pictures/architecture2.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="NoMiddleware">
      <div>
        <h2>No rack middleware</h2>
        <ul>
          <li>That means all Rack-middlewares are unavailable and don’t work out of the box with AnyCable</li>
          <li>And if you need any of its functionality you should build workarounds manually</li>
          <li>Example: Warden middleware (devise gem)</li>
        </ul>
      </div>
    </section>

    <section class="slide" id="Connections">
      <div>
        <ul>
          <li>Method "stop_all_streams" not working (from active to passive)</li>
          <li>There are no long-lived objects inside AnyCable. All objects get instantinated only at a time of RPC call</li>
          <li>Drawback — now ActiveRecord objects used as Channel identifiers may additionally hit DB</li>
          <li>If possible - do not use database in AnyCable</li>
          <li>Disconnect remote clients : Nope</li>
        </ul>
      </div>
    </section>

    <section class="slide" id="Tunning">
      <div>
        <pre><code>
          fs.file-max = 184028

          net.ipv4.tcp_keepalive_intvl = 8
          net.ipv4.tcp_keepalive_probes = 5
          net.ipv4.tcp_keepalive_time = 180

          net.ipv4.tcp_tw_reuse = 0
        </code></pre>
      </div>
    </section>


    <section class="slide" id="WS1">
      <div>
        <img src="pictures/ws1.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="WS2">
      <div>
        <img src="pictures/ws2.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="WS3">
      <div>
        <img src="pictures/ws3.png" alt="" class="cover" />
      </div>
    </section>

    <section class="slide" id="QuestionsSlide"><div>
      <h2>&lt;Thank You!&gt; Questions?</h2>
      <div class="contacts">
        <h3>Contact information</h3>
        <ul>
          <li>web: <a href="http://leopard.in.ua/">leopard.in.ua</a></li>
          <li>github: <a href="https://github.com/le0pard">le0pard</a></li>
          <li>twitter: <a href="https://twitter.com/leopard_me">@leopard_me</a></li>
        </ul>
      </div>
      <img src="pictures/questions.png" alt="QuestionsSlide" class="place l b" />
      <style>
        #QuestionsSlide .contacts {
          margin-top: 100px;
          margin-left: 450px;
        }
      </style>
    </div></section>

    <div class="progress"></div>

    <script src="shower/shower.min.js"></script>
    <!-- Copyright © 2019 Yours Truly, Famous Inc. -->

</body>
</html>
